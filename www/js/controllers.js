// Generated by CoffeeScript 1.9.3
(function() {
  angular.module('perkkx.controllers', []).controller('BadgeCtrl', function($scope) {
    $scope.badges = {
      pending: 0,
      used: 0,
      expired: 0,
      disputed: 0
    };
    return $scope.updateBadge = function(key, num) {
      if ($scope.badges.hasOwnProperty(key) && num >= 0) {
        return $scope.badges[key] = num;
      }
    };
  }).controller('PendingCtrl', function($scope, pxApiConnect) {
    $scope.pcodes = [];
    pxApiConnect.setCallBack('pending', function(data, more) {
      var i, len, obj, results;
      if (more) {
        results = [];
        for (i = 0, len = data.length; i < len; i++) {
          obj = data[i];
          results.push($scope.pcodes.push(obj));
        }
        return results;
      } else {
        return $scope.pcodes = data;
      }
    });
    pxApiConnect.apiGet('pending');
    $scope.refresh = function() {
      return pxApiConnect.apiGet('pending')["finally"](function() {
        return $scope.$broadcast('scroll.refreshComplete');
      });
    };
    return $scope.loadMore = function() {
      var res;
      res = pxApiConnect.apiMore('pending');
      if (res.more) {
        return res.future["finally"](function() {
          return $scope.$broadcast('scroll.infiniteScrollComplete');
        });
      } else {
        return $scope.$broadcast('scroll.infiniteScrollComplete');
      }
    };
  }).controller('UsedCtrl', function($scope, pxApiConnect) {
    $scope.ucodes = [];
    pxApiConnect.setCallBack('used', function(data, more) {
      var i, len, obj, results;
      if (more) {
        results = [];
        for (i = 0, len = data.length; i < len; i++) {
          obj = data[i];
          results.push($scope.ucodes.push(obj));
        }
        return results;
      } else {
        return $scope.ucodes = data;
      }
    });
    pxApiConnect.apiGet('used');
    $scope.refresh = function() {
      return pxApiConnect.apiGet('used')["finally"](function() {
        return $scope.$broadcast('scroll.refreshComplete');
      });
    };
    return $scope.loadMore = function() {
      var res;
      res = pxApiConnect.apiMore('used');
      if (res.more) {
        return res.future["finally"](function() {
          return $scope.$broadcast('scroll.infiniteScrollComplete');
        });
      } else {
        return $scope.$broadcast('scroll.infiniteScrollComplete');
      }
    };
  }).controller('ExpiredCtrl', function($scope, pxApiConnect) {
    $scope.ecodes = [];
    pxApiConnect.setCallBack('expired', function(data, more) {
      var i, len, obj, results;
      if (more) {
        results = [];
        for (i = 0, len = data.length; i < len; i++) {
          obj = data[i];
          results.push($scope.ecodes.push(obj));
        }
        return results;
      } else {
        return $scope.ecodes = data;
      }
    });
    pxApiConnect.apiGet('expired');
    $scope.refresh = function() {
      return pxApiConnect.apiGet('expired')["finally"](function() {
        return $scope.$broadcast('scroll.refreshComplete');
      });
    };
    return $scope.loadMore = function() {
      var res;
      res = pxApiConnect.apiMore('expired');
      if (res.more) {
        return res.future["finally"](function() {
          return $scope.$broadcast('scroll.infiniteScrollComplete');
        });
      } else {
        return $scope.$broadcast('scroll.infiniteScrollComplete');
      }
    };
  }).controller('DisputeCtrl', function($scope, pxApiConnect) {
    $scope.dcodes = [];
    pxApiConnect.setCallBack('disputed', function(data, more) {
      var i, len, obj, results;
      if (more) {
        results = [];
        for (i = 0, len = data.length; i < len; i++) {
          obj = data[i];
          results.push($scope.dcodes.push(obj));
        }
        return results;
      } else {
        return $scope.dcodes = data;
      }
    });
    pxApiConnect.apiGet('disputed');
    $scope.refresh = function() {
      return pxApiConnect.apiGet('disputed')["finally"](function() {
        return $scope.$broadcast('scroll.refreshComplete');
      });
    };
    return $scope.loadMore = function() {
      var res;
      res = pxApiConnect.apiMore('disputed');
      if (res.more) {
        return res.future["finally"](function() {
          return $scope.$broadcast('scroll.infiniteScrollComplete');
        });
      } else {
        return $scope.$broadcast('scroll.infiniteScrollComplete');
      }
    };
  });


  /*
  .controller 'PendingCtrl', ($scope, pxApiConnect) ->
    $scope.pcodes = []
    $scope.submit = (obj) ->
  .controller 'UsedCtrl', ($scope, pxApiConnect) ->
    $scope.ucodes = []
    $scope.submit = (obj) ->
  .controller 'ExpiredCtrl', ($scope, pxApiConnect) ->
    $scope.ecodes = []
    $scope.submit = (obj) ->
  .controller 'DisputeCtrl', ($scope, pxApiConnect) ->
    $scope.dcodes = []
    $scope.submit = (obj) ->
   */

}).call(this);

//# sourceMappingURL=controllers.js.map
